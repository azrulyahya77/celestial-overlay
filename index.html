<!DOCTYPE html>
<html>
<head>
  <title>Celestial Overlay</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; color: #fff; background: #000; text-align: center; padding-top: 50px; }
    .moon { font-size: 2em; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ðŸŒŒ Celestial Cycles</h1>
  <div id="sunrise"></div>
  <div id="sunset"></div>
  <div class="moon" id="moonPhase"></div>

  <script>
    async function fetchCelestial() {
      try {
        const res = await fetch('https://celestial-proxy.vercel.app/celestial.json');
        const data = await res.json();

        document.getElementById('sunrise').textContent = `ðŸŒ… Sunrise: ${data.sunrise}`;
        document.getElementById('sunset').textContent = `ðŸŒ‡ Sunset: ${data.sunset}`;

        const phase = data.moon_phase;
        const phaseName = phase < 0.1 ? "ðŸŒ‘ New Moon" :
                          phase < 0.25 ? "ðŸŒ’ Waxing Crescent" :
                          phase < 0.5 ? "ðŸŒ“ First Quarter" :
                          phase < 0.75 ? "ðŸŒ” Waxing Gibbous" :
                          phase < 0.9 ? "ðŸŒ• Full Moon" : "ðŸŒ– Waning Gibbous";
        document.getElementById('moonPhase').textContent = `ðŸŒ• Moon Phase: ${phaseName}`;
      } catch (err) {
        document.body.innerHTML += `<p style="color:red;">Failed to fetch celestial data</p>`;
        console.error("Celestial fetch error:", err);
      }
    }

    fetchCelestial();
    setInterval(fetchCelestial, 60000); // Refresh every minute
  </script>
</body>
</html>
